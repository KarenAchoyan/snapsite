{"id":22667,"date":"2020-05-26T19:27:19","date_gmt":"2020-05-26T19:27:19","guid":{"rendered":"https:\/\/xtratheme.com\/?p=22667"},"modified":"2021-02-09T08:54:53","modified_gmt":"2021-02-09T08:54:53","slug":"easy-way-to-stop-spam-comments-without-plugin","status":"publish","type":"post","link":"https:\/\/xtratheme.com\/blog\/easy-way-to-stop-spam-comments-without-plugin\/","title":{"rendered":"Easy way to stop spam comments without plugin"},"content":{"rendered":"\n<p>If you are website owner, you probably have encountered spam comments, They are really annoying and surely you have looking for a way to get rid of spam comments.<\/p>\n\n\n\n<p>If you search about preventing spam comments in search engines like Google, surely you will find some free and paid plugins which some of them works and some of them not. But usually website owners don&#8217;t like to use plugin for this type of problems due to performance of their website and also security risk.<\/p>\n\n\n\n<figure class=\"wp-block-image size-large cz-img-border\" style=\"border:1px solid #ccc;\"><img decoding=\"async\" width=\"1024\" height=\"628\" src=\"data:image\/svg+xml,%3Csvg%20xmlns%3D&#39;http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg&#39;%20width=&#39;1024&#39;%20height=&#39;628&#39;%20viewBox%3D&#39;0%200%201024%20628&#39;%2F%3E\" data-czlz data-src=\"https:\/\/xtratheme.com\/wp-content\/uploads\/2020\/05\/prevent-spam-comments-1024x628.png\" alt=\"\" class=\"wp-image-22681\" data-srcset=\"https:\/\/xtratheme.com\/wp-content\/uploads\/2020\/05\/prevent-spam-comments-1024x628.png 1024w, https:\/\/xtratheme.com\/wp-content\/uploads\/2020\/05\/prevent-spam-comments-300x184.png 300w, https:\/\/xtratheme.com\/wp-content\/uploads\/2020\/05\/prevent-spam-comments-768x471.png 768w, https:\/\/xtratheme.com\/wp-content\/uploads\/2020\/05\/prevent-spam-comments-600x368.png 600w, https:\/\/xtratheme.com\/wp-content\/uploads\/2020\/05\/prevent-spam-comments.png 1065w\" data-sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure>\n\n\n\n<p>So what&#8217;s the easy solution for preventing spam comments? We have a quick solution here, by adding small PHP codes to your theme or child theme functions.php file you will prevent all spam comments on your website. <\/p>\n\n\n\n<h3 class=\"section_title wp-block-heading\">Replace website field in comments form with security field<\/h3>\n\n\n\n<p>Just copy and paste following code into your theme or child theme functions.php file and save it. <\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>\/\/ Add security field to comments.\nfunction xtra_add_comment_field( $fields ) {\n\n\tif ( isset( $fields&#91;'url'] ) ) {\n\n\t\t$num_a = rand( 1, 10 );\n\t\t$num_b = rand( 1, 10 );\n\n\t\t$fields&#91;'url'] = '&lt;p class=\"comment-form-url\"&gt;&lt;label for=\"url\"&gt;' . $num_a . ' + ' . $num_b . ' = ?&lt;\/label&gt;&lt;input id=\"url\" name=\"url\" type=\"text\" value=\"\" size=\"30\" maxlength=\"200\" \/&gt;&lt;input name=\"security\" type=\"hidden\" value=\"' . md5( $num_a + $num_b ) . '\" \/&gt;&lt;\/p&gt;';\n\n\t}\n\n\treturn $fields;\n}\nadd_filter( 'comment_form_default_fields', 'xtra_add_comment_field' );\n\n\/\/ Check security field for comments.\nfunction xtra_verify_comment_field( $commentdata ) {\n\n\tif ( ! empty( $_POST&#91;'url'] ) &amp;&amp; ! empty( $_POST&#91;'security'] ) ) {\n\n\t\tif ( md5( $_POST&#91;'url'] ) !== $_POST&#91;'security'] ) {\n\t\t\twp_die( 'Error: Security answer is wrong' );\n\t\t}\n\n\t\t$commentdata&#91;'comment_author_url'] = '';\n\n\t} else {\n\t\twp_die( 'Error: Security answer is wrong' );\n\t}\n\n\treturn $commentdata;\n}\nadd_filter( 'preprocess_comment', 'xtra_verify_comment_field' );<\/code><\/pre>\n\n\n\n<p>Save file and refresh your post page then check your comments form. Or if you want to add security question field under other fields, try bellow function codes.<\/p>\n\n\n\n<h3 class=\"section_title wp-block-heading\">Add security field in comments form under website field<\/h3>\n\n\n\n<p>But If you want to keep your comments form website field and want to add one extra security field bellow it, you can use following codes:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>\/\/ Add security field to comments.\nfunction xtra_add_comment_fields( $fields ) {\n\n\tif ( isset( $fields&#91;'question'] ) ) {\n\n\t\t$num_a = rand( 1, 10 );\n\t\t$num_b = rand( 1, 10 );\n\n\t\t$fields&#91;'question'] = '&lt;p class=\"comment-form-question\"&gt;&lt;label for=\"question\"&gt;' . $num_a . ' + ' . $num_b . ' = ?&lt;\/label&gt;&lt;input id=\"question\" name=\"question\" type=\"text\" value=\"\" size=\"30\" maxlength=\"200\" \/&gt;&lt;input name=\"security\" type=\"hidden\" value=\"' . md5( $num_a + $num_b ) . '\" \/&gt;&lt;\/p&gt;';\n\n\t}\n\n\treturn $fields;\n}\nadd_filter( 'comment_form_default_fields', 'xtra_add_comment_fields' );\n\n\/\/ Check security field for comments.\nfunction xtra_verify_comment_field( $commentdata ) {\n\n\tif ( ! empty( $_POST&#91;'question'] ) &amp;&amp; ! empty( $_POST&#91;'security'] ) ) {\n\n\t\tif ( md5( $_POST&#91;'question'] ) !== $_POST&#91;'security'] ) {\n\t\t\twp_die( 'Error: Security answer is wrong' );\n\t\t}\n\t\t$commentdata&#91;'comment_author_url'] = '';\n\t\t\n\t} else {\n\t\twp_die( 'Error: Security answer is wrong' );\n\t}\n\n\treturn $commentdata;\n}\nadd_filter( 'preprocess_comment', 'xtra_verify_comment_field' );<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>If you are website owner, you probably have encountered spam comments, They are really annoying and surely you have looking for a way to &#8230; <a class=\"cz_readmore\" href=\"https:\/\/xtratheme.com\/blog\/easy-way-to-stop-spam-comments-without-plugin\/\"><i class=\"fa fa-caret-right\" aria-hidden=\"true\"><\/i><span>Read More<\/span><\/a><\/p>\n","protected":false},"author":1,"featured_media":22674,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[122],"tags":[120,121,119],"_links":{"self":[{"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/posts\/22667"}],"collection":[{"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/comments?post=22667"}],"version-history":[{"count":10,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/posts\/22667\/revisions"}],"predecessor-version":[{"id":30901,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/posts\/22667\/revisions\/30901"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/media\/22674"}],"wp:attachment":[{"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/media?parent=22667"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/categories?post=22667"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/xtratheme.com\/wp-json\/wp\/v2\/tags?post=22667"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}